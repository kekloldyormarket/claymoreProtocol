(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{33060:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap/[mintKey]",function(){return t(93472)}])},93472:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return K},numberWithCommas:function(){return M},SwapDisplay:function(){return P}});var r=t(92021),o=t.n(r),i=t(52322),u=t(86334),c=t(2784),a=t(6388),s=t(28392),l=t(31186),p=t(27158),f=t(60564),d=t(69704),h=t(62620),y=t(725),b=t(20893),x=t(5632),m=t(60163),v=t(62981);function w(e,n,t,r,o,i,u){try{var c=e[i](u),a=c.value}catch(s){return void t(s)}c.done?n(a):Promise.resolve(a).then(r,o)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){w(i,r,o,u,c,"next",e)}function c(e){w(i,r,o,u,c,"throw",e)}u(void 0)}))}}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){j(e,n,t[n])}))}return e}function S(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(a){o=!0,i=a}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var K=!0;function M(e,n){var t=void 0===n?4:n;return(0,l.roundToDecimals)(e,t).toLocaleString("en-US")}var _=function(e){var n=e.children,t=S(e,["children"]);return(0,i.jsx)(f.M5,k({p:"26px",rounded:"lg",backgroundColor:(0,h.ff)("gray.200","black.500")},t,{children:n}))},A=function(e){var n=e.children,t=S(e,["children"]);return(0,i.jsx)(f.xv,k({fontWeight:700,fontSize:"24px"},t,{children:n}))};new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});function I(e){if(e)return e.toNumber()/Math.pow(10,2)}var F=!0,P=function(e){var n=e.name,t=e.image,r=e.description,h=(0,x.useRouter)();console.log(h.query);var w=h.query,j=w.mintKey,k=w.fanoutKey,S=(0,l.usePublicKey)(j),K=(0,l.useTokenBondingFromMint)(S),P=K.info,T=K.loading;console.log(P);var N=(0,l.usePublicKey)(k),E=(0,v.useWallet)(),B=(0,c.useState)("1.38"),z=B[0],D=B[1],W=(0,c.useState)(0),L=(W[0],W[1],C(c.useState(0),2)),U=(L[0],L[1]),X=C(c.useState(0),2),q=X[0],G=X[1],H=C(c.useState(0),2),R=H[0],$=H[1],J=(0,c.useState)(0),Q=J[0],V=J[1];function Y(){return(Y=g(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),console.log(n.target.value),D(n.target.value);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=g(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=11;break}return n=new a.FanoutClient(new p.Connection("https://ssc-dao.genesysgo.net/"),E),e.next=5,n.distributeTokenMemberInstructions({distributeForMint:!1,fanout:N,membershipMint:S,member:E.publicKey,payer:E.publicKey});case 5:return t=e.sent,e.next=8,n.distributeTokenMemberInstructions({distributeForMint:!0,fanoutMint:S,fanout:N,membershipMint:S,member:E.publicKey,payer:E.publicKey});case 8:return e.sent,e.next=11,n.sendInstructions(O(t.instructions),[],E.publicKey);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=g(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=10;break}return n=new a.FanoutClient(new p.Connection("https://ssc-dao.genesysgo.net/"),E),console.log(parseFloat(z)*Math.pow(10,2)),e.next=6,n.stakeTokenMemberInstructions({shares:parseFloat(z)*Math.pow(10,2),fanout:N,membershipMint:S,member:E.publicKey,payer:E.publicKey});case 6:return t=e.sent,e.next=9,n.sendInstructions(t.instructions,[],E.publicKey);case 9:e.sent;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=g(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return n=new a.FanoutClient(new p.Connection("https://ssc-dao.genesysgo.net/"),E),e.next=5,n.unstakeTokenMember({fanout:N,member:E.publicKey,payer:E.publicKey});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return!T&&F&&P&&N&&(F=!1,setTimeout(function(){var e=g(o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=25;break}return e.prev=1,n=new a.FanoutClient(new p.Connection("https://ssc-dao.genesysgo.net/"),E),e.next=5,n.fetch(N,a.Fanout);case 5:return t=e.sent,console.log(t),console.log(t),$(I(new s.BN(null===t||void 0===t?void 0:t.totalShares))),G(I(new s.BN(null===t||void 0===t?void 0:t.totalStakedShares))),U(new s.BN(null===t||void 0===t?void 0:t.totalMembers)),e.prev=11,e.next=14,getAssociatedAccountBalance(connection2,E.publicKey,S);case 14:r=e.sent,V(r.uiAmount),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(11);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),console.log(e.t1);case 25:case"end":return e.stop()}}),e,null,[[1,22],[11,18]])})));return function(){return e.apply(this,arguments)}}(),1380)),(0,i.jsxs)(f.xu,{w:"full",backgroundColor:"#f9f9f9",height:"100vh",overflow:"auto",paddingBottom:"200px",children:[(0,i.jsx)(u.y,{title:"Strata Swap | ".concat(n),description:r,image:t,url:"".concat(m._O,"/bounty/").concat(S,"/")}),(0,i.jsx)(f.xu,{padding:"54px",backgroundColor:"black.500"}),(0,i.jsxs)(f.W2,{mt:"-72px",justify:"stretch",maxW:"460px",children:[(0,i.jsx)(f.X6,{mb:2,color:"white",fontSize:"24px",fontWeight:600,children:"Swap"}),(0,i.jsxs)(f.xu,{zIndex:1,bg:"white",shadow:"xl",rounded:"lg",minH:"400px",children:[T&&(0,i.jsx)(f.M5,{children:(0,i.jsx)(d.$,{})}),!T&&P&&(0,i.jsxs)("div",{children:[(0,i.jsx)(f.gC,{direction:["column","row"],children:(0,i.jsxs)(f.Ug,{flexGrow:4,children:[(0,i.jsxs)(A,{children:[(0,i.jsxs)(_,{w:"full",position:"relative",children:[M(q,4)," "]})," Staked"]}),(0,i.jsxs)(A,{children:[(0,i.jsxs)(_,{w:"full",position:"relative",children:[M(Q,4)," "]})," Balance"]})]})}),(0,i.jsx)(f.gC,{children:(0,i.jsxs)(A,{children:[(0,i.jsxs)(_,{w:"full",position:"relative",children:[M(R,4)," "]})," Supply"]})}),(0,i.jsxs)(f.gC,{children:[(0,i.jsx)(y.zx,{onClick:function(){return Z.apply(this,arguments)},children:"meCLAIM"}),(0,i.jsx)(b.II,{style:{color:"black",fontSize:"30px;",backgroundColor:"grey"},type:"text",onInput:function(e){return Y.apply(this,arguments)},value:z}),(0,i.jsx)(y.zx,{onClick:function(){return ee.apply(this,arguments)},children:"STAKEme"}),(0,i.jsx)(y.zx,{onClick:function(){return ne.apply(this,arguments)},children:"UNSTAKEALLme"})]}),(0,i.jsx)(l.Swap,{tokenBondingKey:P.publicKey})]})]})]})]})};n.default=P}},function(e){e.O(0,[774,888,179],(function(){return n=33060,e(e.s=n);var n}));var n=e.O();_N_E=n}]);