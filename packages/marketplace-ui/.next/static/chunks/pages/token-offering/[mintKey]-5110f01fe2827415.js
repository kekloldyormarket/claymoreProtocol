(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{69023:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/token-offering/[mintKey]",function(){return t(20032)}])},20032:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return p},SwapDisplay:function(){return g}});var r=t(52322),o=t(86334),i=t(60564),u=t(31186),s=t(5632),a=(t(2784),t(31331)),c=t(96687),l=t(62981),d=t(9744),f=t(60163),p=!0,g=function(n){var e=n.name,t=n.image,p=n.description,g=(0,s.useRouter)().query.mintKey,b=(0,u.usePublicKey)(g),m=(0,u.useTokenBondingFromMint)(b).info,v=(0,l.useWallet)().publicKey,y=(0,d.Y)(v||void 0,null===m||void 0===m?void 0:m.publicKey).isAdmin;return(0,r.jsxs)(i.xu,{w:"full",backgroundColor:"#f9f9f9",height:"100vh",overflow:"auto",paddingBottom:"200px",children:[(0,r.jsx)(o.y,{title:"Strata Token Offering | ".concat(e),description:p,image:t,url:"".concat(f._O,"/token-offering/").concat(b,"/")}),(0,r.jsx)(i.xu,{padding:"54px",backgroundColor:"black.500"}),(0,r.jsxs)(i.W2,{mt:"-72px",justify:"stretch",maxW:"460px",children:[(0,r.jsx)(i.X6,{mb:2,color:"white",fontSize:"24px",fontWeight:600,children:"Swap"}),(0,r.jsxs)(i.xu,{zIndex:1,bg:"white",shadow:"xl",rounded:"lg",minH:"400px",children:[y&&m&&(0,r.jsxs)(i.xu,{p:4,borderBottom:"3px solid",borderRadius:"lg",borderColor:"gray.300",children:[(0,r.jsx)(i.X6,{size:"md",children:"Disburse Funds"}),(0,r.jsx)(c.Z,{tokenBondingKey:null===m||void 0===m?void 0:m.publicKey,includeRetrievalCurve:!0})]}),(0,r.jsx)(a.z,{mintKey:b})]})]})]})};e.default=g},31331:function(n,e,t){"use strict";t.d(e,{z:function(){return m}});var r=t(92021),o=t.n(r),i=t(52322),u=t(2784),s=t(27193),a=t(31186),c=t(11929),l=t(89587);function d(n,e,t,r,o,i,u){try{var s=n[i](u),a=s.value}catch(c){return void t(c)}s.done?e(a):Promise.resolve(a).then(r,o)}function f(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function g(n){return function(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var b=function(){},m=function(n){var e=n.mintKey,t=n.showAttribution,r=void 0===t||t,m=(0,a.useTokenBondingKey)(e,1),v=m.result,y=m.error,h=(0,a.useStrataSdks)().tokenBondingSdk,x=(0,a.useTokenBonding)(v),w=x.info,k=x.loading,j=(0,a.useTokenBondingKey)(null===w||void 0===w?void 0:w.targetMint,0),O=j.result,S=j.error,_=(0,a.useTokenBonding)(O).info,A=(0,a.useTokenAccount)(null===w||void 0===w?void 0:w.baseStorage).info,T=(0,a.useMint)(null===w||void 0===w?void 0:w.baseMint),B=(0,c.useAsyncCallback)(function(n){var e,t=(e=o().mark((function n(e){var t,r,u,c,l,d,f,p,b,m,y,x;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=[],c=[],n.next=5,h.buyInstructions({desiredTargetAmount:+e.bottomAmount,slippage:+e.slippage/100,tokenBonding:O});case 5:if(l=n.sent,d=l.instructions,f=l.signers,(t=u).push.apply(t,g(d)),(r=c).push.apply(r,g(f)),!w){n.next=19;break}return n.next=14,h.sellInstructions({targetAmount:(0,a.roundToDecimals)(+e.bottomAmount,T.decimals),slippage:+e.slippage/100,tokenBonding:v});case 14:m=n.sent,y=m.instructions,x=m.signers,(p=u).push.apply(p,g(y)),(b=c).push.apply(b,g(x));case 19:return n.next=21,h.sendInstructions(u,c);case 21:s.default.custom((function(n){return(0,i.jsx)(a.Notification,{show:n.visible,type:"success",heading:"Transaction Successful",message:"Succesfully purchased ".concat(Number(e.bottomAmount).toFixed(9),"!"),onDismiss:function(){return s.default.dismiss(n.id)}})}));case 22:case"end":return n.stop()}}),n)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(n){d(i,r,o,u,s,"next",n)}function s(n){d(i,r,o,u,s,"throw",n)}u(void 0)}))});return function(){return t.apply(this,arguments)}}()),K=B.execute,P=B.loading,M=B.error;(0,(0,a.useErrorHandler)().handleErrors)(y,S,M);var E=(0,u.useMemo)((function(){return{base:null===_||void 0===_?void 0:_.baseMint,target:null===_||void 0===_?void 0:_.targetMint}}),[null===_||void 0===_?void 0:_.baseMint,null===_||void 0===_?void 0:_.targetMint]),C=(0,a.useSwapDriver)({tradingMints:E,onTradingMintsChange:function(){},swap:function(n){},onConnectWallet:b,tokenBondingKey:O}),N=C.loading,D=p(C,["loading"]);return(0,i.jsx)(a.SwapForm,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){f(n,e,t[e])}))}return n}({showAttribution:r,isLoading:N||k,isSubmitting:P},D,{onSubmit:K,numRemaining:A&&T&&(0,l.toNumber)(A.amount,T)}))}}},function(n){n.O(0,[774,888,179],(function(){return e=69023,n(n.s=e);var e}));var e=n.O();_N_E=e}]);